#define mem_s  4096
#define pmem_s 16
#define sc_s   64*32
#define row_n  32
#define col_n  64
#define ni     ch8->pc += 2

unsigned char screen[sc_s];

typedef struct chip8{
  unsigned char memory[mem_s];
  unsigned char  V[pmem_s+1], Key[pmem_s+1];
  unsigned short I, pc, sp, stack[pmem_s];
  unsigned char  delay_timer, sound_timer;
} C8; 


static unsigned char c8_fontset[80] =  {
  0xF0, 0x90, 0x90, 0x90, 0xF0, // 0
  0x20, 0x60, 0x20, 0x20, 0x70, // 1
  0xF0, 0x10, 0xF0, 0x80, 0xF0, // 2
  0xF0, 0x10, 0xF0, 0x10, 0xF0, // 3
  0x90, 0x90, 0xF0, 0x10, 0x10, // 4
  0xF0, 0x80, 0xF0, 0x10, 0xF0, // 5
  0xF0, 0x80, 0xF0, 0x90, 0xF0, // 6
  0xF0, 0x10, 0x20, 0x40, 0x40, // 7
  0xF0, 0x90, 0xF0, 0x90, 0xF0, // 8
  0xF0, 0x90, 0xF0, 0x10, 0xF0, // 9
  0xF0, 0x90, 0xF0, 0x90, 0x90, // A
  0xE0, 0x90, 0xE0, 0x90, 0xE0, // B
  0xF0, 0x80, 0x80, 0x80, 0xF0, // C
  0xE0, 0x90, 0x90, 0x90, 0xE0, // D
  0xF0, 0x80, 0xF0, 0x80, 0xF0, // E
  0xF0, 0x80, 0xF0, 0x80, 0x80  // F
};

void c8_clear_mem(C8 *c8);
void c8_read_rom_to_mem(C8 *c8, char* path);
void c8_execH(unsigned short opcode, C8 *c8);
void c8_exec(C8 *c8);
void c8_sdl_main_loop(C8 *c8);
void c8_init(char* path);
